---
import MenuDropdown from './menuDropdown.astro'
import Shopbag from './shopbag.astro'
import arrowicon from '../../public/image/angle-vertical.svg'
import { Image } from 'astro:assets';

interface IProps {
    Data: {
        social_media_section: {
            image: {
                src: string;
                height: number;
                width: number;
                format: "png" | "jpg" | "jpeg" | "tiff" | "webp" | "gif" | "svg" | "avif";
            };
            name: string;
        }[];
        languages: {
            name: string;
            abbreviation: string;
        }[];
        navigation_pages: {
            gallery_page_text:string;
            dropdown_menu:{
                gallery_name:string;
                link:string
            }[]
            service_page_text: string;
            service_page_link: string;
            booking_page_text: string;
            booking_page_link: string;
        };
        site_name: string;
        booking_button_text: string;
        booking_button_link: string;
    }
}
const pageData = Astro.props as Partial<IProps>

const navegation=[
    {
        Text:pageData.Data?.navigation_pages.gallery_page_text,
        subMemu:[
            {
                buttonTitle:pageData.Data?.navigation_pages.dropdown_menu[0].gallery_name,
                buttonLink:pageData.Data?.navigation_pages.dropdown_menu[0].link
            },
            {
                buttonTitle:pageData.Data?.navigation_pages.dropdown_menu[1].gallery_name,
                buttonLink:pageData.Data?.navigation_pages.dropdown_menu[1].link
            }
        ]
    },
    {
        Text:pageData.Data?.navigation_pages.service_page_text,
        Links:[
            pageData.Data?.navigation_pages.service_page_link
        ]
    },
    {
        Text:pageData.Data?.navigation_pages.booking_page_text,
        Links: [
            pageData.Data?.navigation_pages.booking_page_link
        ]
    }
]
---
<nav class="w-full flex justify-center h-[130px]">
    <section x-data="navbarData" class="flex items-center justify-evenly gap-72 max-w-[1920px]">
        <div class="flex gap-5">
            {
                pageData.Data?.social_media_section.map((data,index: any)=>{
                    return(
                        <Image id={`sm-icon${index}`} x-on:mouseover="growText" x-on:mouseleave="shrinkText" class="w-[43px] h-[43px]" src={data.image} alt={data.name}/>
                    )
                })
            }
            <button class="flex items-center gap-2.5">
                {}
                <img src={arrowicon.src} alt="arrow">
            </button>
        </div>
        <div class="flex flex-col items-center gap-3">
            <a href="/">
                <h2 class="text-4xl font-satisfy text-reddarker">Berbat Photos</h2>
            </a>
            <div class="flex justify-evenly gap-20">
                {
                    navegation.map((data:any, index)=>{
                        return(
                            index==0?<MenuDropdown index={index} Text={data.Text} MenuContent={data.subMemu}/>:<a href={data?.Links[0]} class="flex flex-col">
                                <button id={`link${index}`} x-on:mouseover="handleMainLinkOn" x-on:mouseleave="handleMainLinkOff" class=" cursor-pointer font-lora italic text-2xl text-darker2">{data.Text}</button>
                                <span id={`linkPages${index}`} class=" h-1 bg-darker2"></span>
                            </a>
                        )
                    })
                }
            </div>
        </div>
        <div class="flex gap-6 items-center">
            <Shopbag/>
            <div class=" flex justify-center items-center rounded-lg bg-brighter1 w-[223px] h-[46px]">
                <a href={pageData.Data?.booking_button_link}>
                    <button id="navbarBtnContent" x-on:mouseover="growText" x-on:mouseleave="shrinkText" class="cursor-pointer font-lora italic text-lg text-darker2">
                        {pageData.Data?.booking_button_text}
                    </button>
                </a>
            </div>
        </div>
    </section>
</nav>
